{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=4)}([function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(5)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var s=!0,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),s&&e.writeToLog(\"Debug mode enabled\",!0),e.writeToLog(\"Death Blow client starting\"),this.dBS=new a.default,this.sessionId=this.dBS.createSession(),e.writeToLog(\"Session ID: \"+this.sessionId),this.dBS.addPlayer(\"Player 1\",this.sessionId),null!=$(document.getElementById(\"battleground\"))?(this.renderer=new i.default(\"battleground\"),e.writeToLog(\"Renderer initialised\")):e.writeToError(\"No canvas found\"),this.dBS.startSession(this.sessionId);for(var t,n=!1,r=0;!n;)setTimeout(function(){e.writeToLog(\"Attempting to retrieve game step #\"+r),t=this.dBS.getGameStep(this.sessionId,r),0==r&&this.renderer.initialRender(t),r++,n=t.gameEnded},5e3);e.writeToLog(\"Game ending\")}return r(e,null,[{key:\"writeToError\",value:function(t){e.writeToLog(\"ERROR: \"+t,!1)}},{key:\"writeToLog\",value:function(t){e.writeToLog(t,!1)}},{key:\"writeToLog\",value:function(e,t){var n=$(\".debug-log\");t&&(n.append(\"----------------------------\"),n.append(\"<br />\")),n.append(e),n.append(\"<br />\"),t&&(n.append(\"----------------------------\"),n.append(\"<br />\"))}}]),e}();t.default=u},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(6)),a=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.sessionList={}}return r(e,[{key:\"createSession\",value:function(){var e=new i.default;return this.sessionList[e.id]=e,a.default.writeToLog(\"Server session created\"),e.id}},{key:\"startSession\",value:function(e){a.default.writeToLog(\"Starting session\"),this.sessionList[e].fillPlayers(),this.sessionList[e].startSession()}},{key:\"addPlayer\",value:function(e,t){var n={};n.name=e,this.sessionList[t].addPlayer(n)}},{key:\"getGameStep\",value:function(e,t){for(var n={},r=0;Object.keys(n).length<=0;)n=this.sessionList[e].game.getGameStep(t),++r>500&&(n={gameEnded:!0});return n}}],[{key:\"createSession\",value:function(){var e=new i.default;return this.sessionList.push(e),a.default.writeToLog(\"Server session created\"),!0}}]),e}();t.default=s},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.startingPosition=0,this.stats={health:100,movement:10,damage:10,range:5,luck:1,accuracy:100,evasion:10},this.position={x:0,y:0},this.statuses={},this.action={actionType:\"none\"}}return r(e,[{key:\"setStartingPosition\",value:function(e){this.startingPosition=e}}]),e}();t.default=i},function(e,t,n){\"use strict\";n.r(t);var r=class{constructor(e){this.stage=new createjs.Stage(e),u.writeToLog(\"Stage = \"+this.stage)}initialRender(e){u.writeToLog(\"Initial render\"),this.characterCollection={};var t=this.stage;for(var n in e.characters){var r=new createjs.Shape;r.graphics.beginFill(\"red\").drawRect(0,0,5,10),r.x=e.characters[n].position.x,r.y=e.characters[n].position.y,t.addChild(r)}this.stage.update(),createjs.Ticker.framerate=60,createjs.Ticker.addEventListener(\"tick\",handleTick)}renderStep(e){}handleTick(e){this.stage.update()}},i=n(1),a=n.n(i);let o=!0;class s{constructor(){o&&s.writeToLog(\"Debug mode enabled\",!0),s.writeToLog(\"Death Blow client starting\"),this.dBS=new a.a,this.sessionId=this.dBS.createSession(),s.writeToLog(\"Session ID: \"+this.sessionId),this.dBS.addPlayer(\"Player 1\",this.sessionId),null!=$(document.getElementById(\"battleground\"))?(this.renderer=new r(\"battleground\"),s.writeToLog(\"Renderer initialised\")):s.writeToError(\"No canvas found\"),this.dBS.startSession(this.sessionId);for(var e,t=!1,n=0;!t;)setTimeout(function(){s.writeToLog(\"Attempting to retrieve game step #\"+n),e=this.dBS.getGameStep(this.sessionId,n),0==n&&this.renderer.initialRender(e),n++,t=e.gameEnded},5e3);s.writeToLog(\"Game ending\")}static writeToError(e){s.writeToLog(\"ERROR: \"+e,!1)}static writeToLog(e){s.writeToLog(e,!1)}static writeToLog(e,t){var n=$(\".debug-log\");t&&(n.append(\"----------------------------\"),n.append(\"<br />\")),n.append(e),n.append(\"<br />\"),t&&(n.append(\"----------------------------\"),n.append(\"<br />\"))}}var u=t.default=s},function(e,t,n){\"use strict\";new(function(e){return e&&e.__esModule?e:{default:e}}(n(0)).default)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.stage=new createjs.Stage(t),i.default.writeToLog(\"Stage = \"+this.stage)}return r(e,[{key:\"initialRender\",value:function(e){i.default.writeToLog(\"Initial render\"),this.characterCollection={};var t=this.stage;for(var n in e.characters){var r=new createjs.Shape;r.graphics.beginFill(\"red\").drawRect(0,0,5,10),r.x=e.characters[n].position.x,r.y=e.characters[n].position.y,t.addChild(r)}this.stage.update(),createjs.Ticker.framerate=60,createjs.Ticker.addEventListener(\"tick\",handleTick)}},{key:\"renderStep\",value:function(e){}},{key:\"handleTick\",value:function(e){this.stage.update()}}]),e}();t.default=a},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(7)),a=s(n(8)),o=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.id=\"1\",this.playerList={},this.minPlayers=1,this.maxPlayers=2}return r(e,[{key:\"addPlayer\",value:function(e){this.playerList[e.name]=new i.default(e),o.default.writeToLog(\"Player added: \"+this.playerList[e.name].name)}},{key:\"fillPlayers\",value:function(){for(;Object.keys(this.playerList).length<this.maxPlayers;){var e={name:\"bot\"};this.addPlayer(e)}}},{key:\"startSession\",value:function(){var e={},t=0;for(var t in this.playerList)e[t]=this.playerList[t].character;this.game=new a.default(e),this.game.playGame()}}]),e}();t.default=u},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2));var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.name=t.name,this.character=new i.default}return r(e,[{key:\"getCharacter\",value:function(){return this.character}}]),e}();t.default=a},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(a(n(2)),a(n(3)));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),i.default.writeToLog(\"Game started\"),this.characterList=t,this.gameSteps={}}return r(e,[{key:\"getGameStep\",value:function(e){return Object.keys(this.gameSteps).length>e?this.gameSteps[e]:null}},{key:\"playGame\",value:function(){this.initialise();for(var e=1;;)this.gameSteps[e]=this.decisionLoop(),e++}},{key:\"decisionLoop\",value:function(){if(!this.checkDeath()){for(var e in this.characterList)this.makeDecision(this.characterList[e]);this.resolveActions()}}},{key:\"makeDecision\",value:function(e){e.action.actionType=\"movement\",e.action.movement=5}},{key:\"resolveActions\",value:function(){for(var e in this.characterList){var t=this.characterList[e];\"movement\"==t.action.actionType&&(t.position.x+=t.stats.movement)}e[0].stats.health=0}},{key:\"checkDeath\",value:function(){var e=0;for(var t in this.characterList)this.characterList[t].stats.health<=0&&e++;return!(e>1)}},{key:\"initialise\",value:function(){i.default.writeToLog(\"Initialising game.\");var e=10;for(var t in this.characterList)this.characterList[t].position.x=e,e+=10;var n={gameEnded:!0};n.characters=this.characterList,this.gameSteps[0]=n}}]),e}();t.default=o}]);","extractedComments":[]}